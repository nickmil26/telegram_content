<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Betting Card Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #222;
            color: white;
            margin: 0;
            padding: 20px;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .form-section {
            background: #333;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            width: 100%;
        }

        .form-section h3 {
            margin-top: 0;
            color: #FFD700;
        }

        /* Wrapper box */
        .card-box {
            background: linear-gradient(to bottom, #FFD700, #FFA500);
            padding: 10px;
            display: inline-block;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        /* Betting Card */
        .card {
            width: 250px;
            height: 250px;
            padding: 8px;
            background: #1a1a2e;
            color: white;
            font-weight: bold;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card h3 {
            margin: 0;
            padding: 5px;
            font-size: 16px;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .card p {
            margin: 5px 0;
            font-size: 14px;
        }

        .divider {
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            margin: 5px 0;
        }

        .input-group {
            margin: 10px 0;
            text-align: left;
        }

        .time-inputs {
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        input {
            width: 60px;
            padding: 6px;
            border: none;
            border-radius: 5px;
            text-align: center;
        }

        .large-input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .action-btn {
            background: #ffcc00;
            color: black;
            border: none;
            padding: 10px 20px;
            margin-top: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
        }

        .action-btn:hover {
            background: #e6b800;
        }
        
        .styled-input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 2px solid white;
            border-radius: 5px;
            background-color: black;
            color: white;
            text-align: center;
            appearance: none;
            cursor: pointer;
            box-sizing: border-box;
        }

        .config-panel {
            background: #444;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: left;
        }

        .config-input {
            width: 100%;
            margin-bottom: 10px;
            padding: 8px;
            box-sizing: border-box;
        }

        #message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
        }

        .success {
            background: #d4edda;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
        }

        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            background: #444;
            border: none;
            color: white;
            cursor: pointer;
        }

        .tab-btn.active {
            background: #ffcc00;
            color: black;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Template management styles */
        .template-management {
            margin-top: 20px;
            background: #444;
            padding: 15px;
            border-radius: 5px;
        }

        .template-list {
            max-height: 200px;
            overflow-y: auto;
            margin: 10px 0;
            border: 1px solid #666;
            border-radius: 5px;
            padding: 10px;
        }

        .template-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            border-bottom: 1px solid #666;
            align-items: center;
        }

        .template-item:last-child {
            border-bottom: none;
        }

        .template-actions button {
            margin-left: 5px;
            padding: 3px 8px;
            font-size: 12px;
            background: #555;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .template-actions button:hover {
            background: #666;
        }

        .template-form {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .template-form input {
            flex: 1;
            padding: 8px;
            border-radius: 5px;
            border: none;
        }

        .template-form button {
            padding: 8px 15px;
            background: #ffcc00;
            color: black;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .export-import {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .export-import button {
            flex: 1;
            padding: 8px;
            background: #555;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h2>Telegram Content Sender</h2>

    <div class="container">
        <!-- Tab Buttons -->
        <div class="tab-buttons">
            <button class="tab-btn active" onclick="openTab(event, 'card-tab')">Betting Card</button>
            <button class="tab-btn" onclick="openTab(event, 'message-tab')">Quick Message</button>
            <button class="tab-btn" onclick="openTab(event, 'config-tab')">Configuration</button>
        </div>

        <!-- Configuration Panel -->
        <div id="config-tab" class="tab-content">
            <div class="config-panel">
                <h3>Telegram Configuration</h3>
                <div class="input-group">
                    <label>Bot Token:</label>
                    <input type="text" id="bot-token" class="config-input" placeholder="Enter your bot token">
                </div>
                <div class="input-group">
                    <label>Channel ID (with @ or numeric ID):</label>
                    <input type="text" id="channel-id" class="config-input" placeholder="@yourchannel or -1001234567890">
                </div>
                <button class="action-btn" onclick="saveConfig()">Save Configuration</button>
            </div>
        </div>

        <!-- Betting Card Tab -->
        <div id="card-tab" class="tab-content active">
            <div class="form-section">
                <h3>Create Betting Card</h3>
                
                <!-- Preview Card -->
                <div class="card-box">
                    <div class="card" id="card">
                        <h3 id="header">RUDRAXK VIP</h3>
                        <p><strong>üéÆ GAME:</strong> <span id="game">Lucky Jet</span></p>
                        <p><strong>‚è≥ TIME:</strong> <span id="time">12:45:10</span></p>
                        <p><strong>‚úÖ SAFE CASHOUT:</strong> <span id="sureshot">3x</span></p>
                        <p><strong>‚ö° COEFFICIENT:</strong> <span id="coefficient">6x</span></p>
                        <div class="divider"></div>
                        <p><strong>üí∞ When Graph Down And BigX Go For 3x Only</strong></p>
                        <div class="divider"></div>
                        <p><strong></strong> <span id="bet-advice"></span></p>
                    </div>
                </div>

                <!-- Input Fields -->
                <div class="input-group">
                    <label>Header:</label>
                    <input type="text" id="header-input" class="large-input" placeholder="RUDRAXK VIP" oninput="updateCard()">
                </div>
                <div class="input-group">
                    <label>Select Game:</label>
                    <select id="game-input" class="styled-input" onchange="updateCard()">
                        <option value="Lucky Jet">Lucky Jet</option>
                        <option value="Aviator">Aviator</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Time:</label>
                    <div class="time-inputs">
                        <input type="number" id="hour-input" placeholder="HH" min="0" max="23" oninput="updateCard()">
                        <input type="number" id="minute-input" placeholder="MM" min="0" max="59" oninput="updateCard()">
                        <input type="number" id="second-input" placeholder="SS" min="0" max="59" oninput="updateCard()">
                    </div>
                </div>
                <div class="input-group">
                    <label>Sureshot:</label>
                    <input type="number" id="sureshot-input" placeholder="3" min="1" max="100" oninput="updateCard()" value="3">
                </div>
                <div class="input-group">
                    <label>Coefficient:</label>
                    <input type="number" id="coefficient-input" placeholder="6" min="1" max="100" oninput="updateCard()" value="6">
                </div>
                <div class="input-group">
                    <label>Bet Advice:</label>
                    <input type="text" id="bet-advice-input" class="large-input" placeholder="Play At Your Own Risk" oninput="updateCard()">
                </div>

                <button class="action-btn" onclick="sendCardToTelegram()">Send Card to Telegram</button>
                <p id="card-message"></p>
            </div>
        </div>

        <!-- Quick Message Tab -->
        <div id="message-tab" class="tab-content">
            <div class="form-section">
                <h3>Send Quick Message</h3>
                
                <div class="input-group">
                    <label>Select Message Template:</label>
                    <select id="message-template" class="styled-input" onchange="onTemplateSelect()">
                        <option value="">-- Select a template --</option>
                        <!-- Templates will be loaded dynamically -->
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Or write custom message:</label>
                    <textarea id="custom-message" class="large-input" rows="4" placeholder="Enter your custom message here"></textarea>
                </div>
                
                <button class="action-btn" onclick="sendMessageToTelegram()">Send Message to Telegram</button>
                <p id="message-status"></p>

                <!-- Template Management Section -->
                <div class="template-management">
                    <h3>Manage Templates</h3>
                    
                    <div class="template-list" id="template-list">
                        <!-- Templates will be listed here -->
                    </div>
                    
                    <div class="template-form">
                        <input type="text" id="new-template-input" placeholder="Enter new template text">
                        <button onclick="addTemplate()">Add Template</button>
                    </div>
                    
                    <div class="template-form" id="edit-template-form" style="display: none;">
                        <input type="text" id="edit-template-input" placeholder="Edit template text">
                        <button onclick="saveEditedTemplate()">Save</button>
                        <button onclick="cancelEdit()">Cancel</button>
                    </div>
                    
                    <div class="export-import">
                        <button onclick="exportTemplates()">Export Templates</button>
                        <button onclick="importTemplates()">Import Templates</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // Global variables
        let templates = [];
        let editingIndex = -1;

        // Load saved config from localStorage
        function loadConfig() {
            const botToken = localStorage.getItem('botToken');
            const channelId = localStorage.getItem('channelId');
            
            if (botToken) document.getElementById('bot-token').value = botToken;
            if (channelId) document.getElementById('channel-id').value = channelId;
        }
        
        // Save config to localStorage
        function saveConfig() {
            const botToken = document.getElementById('bot-token').value;
            const channelId = document.getElementById('channel-id').value;
            
            if (!botToken || !channelId) {
                showMessage('Please enter both Bot Token and Channel ID', 'error', 'card-message');
                return;
            }
            
            localStorage.setItem('botToken', botToken);
            localStorage.setItem('channelId', channelId);
            
            showMessage('Configuration saved successfully!', 'success', 'card-message');
        }
        
        function updateCard() {
            // Header with default
            const headerInput = document.getElementById("header-input").value;
            document.getElementById("header").innerText = headerInput || "RUDRAXK VIP";
            
            // Game selection
            const gameInput = document.getElementById("game-input").value;
            document.getElementById("game").innerText = gameInput || "Lucky Jet";

            // Time with leading zeros
            const pad = num => String(num).padStart(2, "0");
            const hour = pad(document.getElementById("hour-input").value || "12");
            const minute = pad(document.getElementById("minute-input").value || "45");
            const second = pad(document.getElementById("second-input").value || "10");
            document.getElementById("time").innerText = `${hour}:${minute}:${second}`;

            // Sureshot with 'x' suffix
            const sureshot = document.getElementById("sureshot-input").value || "3";
            document.getElementById("sureshot").innerText = sureshot + "x";

            // Coefficient with 'x' suffix
            const coefficient = document.getElementById("coefficient-input").value || "6";
            document.getElementById("coefficient").innerText = coefficient + "x";

            // Bet advice with default
            const betAdvice = document.getElementById("bet-advice-input").value;
            document.getElementById("bet-advice").innerText = betAdvice || "Play At Your Own Risk";
        }

        function showMessage(text, type, elementId = 'message') {
            const msg = document.getElementById(elementId);
            msg.textContent = text;
            msg.className = type;
            setTimeout(() => msg.textContent = '', 5000);
        }

        async function sendCardToTelegram() {
            const botToken = localStorage.getItem('botToken');
            const channelId = localStorage.getItem('channelId');
            
            if (!botToken || !channelId) {
                showMessage('Please configure Telegram settings first', 'error', 'card-message');
                openTab(null, 'config-tab');
                return;
            }
            
            showMessage('Generating and sending card...', '', 'card-message');
            
            try {
                // Generate the card image
                const canvas = await html2canvas(document.querySelector(".card-box"), {
                    backgroundColor: null,
                    scale: 2
                });
                
                // Convert to blob
                canvas.toBlob(async (blob) => {
                    try {
                        // Create form data
                        const formData = new FormData();
                        formData.append('chat_id', channelId);
                        formData.append('photo', blob, 'betting_card.png');
                        
                        // Send to Telegram
                        const response = await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
                            method: 'POST',
                            body: formData
                        });
                        
                        const result = await response.json();
                        
                        if (result.ok) {
                            showMessage('Card successfully sent to Telegram!', 'success', 'card-message');
                        } else {
                            showMessage(`Error: ${result.description || 'Unknown error'}`, 'error', 'card-message');
                        }
                    } catch (error) {
                        showMessage(`Failed to send: ${error.message}`, 'error', 'card-message');
                    }
                }, 'image/png');
            } catch (error) {
                showMessage(`Failed to generate image: ${error.message}`, 'error', 'card-message');
            }
        }

        async function sendMessageToTelegram() {
            const botToken = localStorage.getItem('botToken');
            const channelId = localStorage.getItem('channelId');
            
            if (!botToken || !channelId) {
                showMessage('Please configure Telegram settings first', 'error', 'message-status');
                openTab(null, 'config-tab');
                return;
            }
            
            const template = document.getElementById('message-template').value;
            const customMessage = document.getElementById('custom-message').value;
            
            if (!template && !customMessage) {
                showMessage('Please select a template or write a message', 'error', 'message-status');
                return;
            }
            
            const message = customMessage || template;
            
            showMessage('Sending message...', '', 'message-status');
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: channelId,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                const result = await response.json();
                
                if (result.ok) {
                    showMessage('Message successfully sent to Telegram!', 'success', 'message-status');
                    document.getElementById('custom-message').value = '';
                } else {
                    showMessage(`Error: ${result.description || 'Unknown error'}`, 'error', 'message-status');
                }
            } catch (error) {
                showMessage(`Failed to send message: ${error.message}`, 'error', 'message-status');
            }
        }

        function openTab(evt, tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Deactivate all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Activate selected tab
            document.getElementById(tabId).classList.add('active');
            
            // Activate corresponding button
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => {
                if (btn.getAttribute('onclick').includes(tabId)) {
                    btn.classList.add('active');
                }
            });
            
            // If opening message tab, refresh templates
            if (tabId === 'message-tab') {
                loadTemplates();
            }
        }
        
        // Template management functions
        function loadTemplates() {
            // Load templates from localStorage
            const savedTemplates = localStorage.getItem('messageTemplates');
            templates = savedTemplates ? JSON.parse(savedTemplates) : [
                "üö® ALERT: New signal detected! Check channel for details.",
                "üí∞ WINNER! Last play hit 5x multiplier",
                "‚ö†Ô∏è REMINDER: Always play responsibly and within your limits",
                "üî• HOT STREAK: We're on a 5-win streak!",
                "üìä STATS: Yesterday's win rate was 78%"
            ];
            
            // Update template dropdown
            const templateSelect = document.getElementById('message-template');
            templateSelect.innerHTML = '<option value="">-- Select a template --</option>';
            
            templates.forEach(template => {
                const option = document.createElement('option');
                option.value = template;
                option.textContent = template.length > 50 ? template.substring(0, 47) + '...' : template;
                templateSelect.appendChild(option);
            });
            
            // Update template list
            const templateList = document.getElementById('template-list');
            templateList.innerHTML = '';
            
            templates.forEach((template, index) => {
                const item = document.createElement('div');
                item.className = 'template-item';
                
                const text = document.createElement('span');
                text.textContent = template.length > 60 ? template.substring(0, 57) + '...' : template;
                text.title = template;
                
                const actions = document.createElement('div');
                actions.className = 'template-actions';
                
                const editBtn = document.createElement('button');
                editBtn.textContent = 'Edit';
                editBtn.onclick = () => editTemplate(index);
                
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.onclick = () => deleteTemplate(index);
                
                actions.appendChild(editBtn);
                actions.appendChild(deleteBtn);
                
                item.appendChild(text);
                item.appendChild(actions);
                
                templateList.appendChild(item);
            });
        }
        
        function addTemplate() {
            const input = document.getElementById('new-template-input');
            const text = input.value.trim();
            
            if (!text) {
                showMessage('Please enter template text', 'error', 'message-status');
                return;
            }
            
            templates.push(text);
            saveTemplates();
            input.value = '';
            loadTemplates();
            showMessage('Template added successfully!', 'success', 'message-status');
        }
        
        function editTemplate(index) {
            editingIndex = index;
            document.getElementById('edit-template-input').value = templates[index];
            
            document.getElementById('edit-template-form').style.display = 'flex';
            document.querySelector('.template-form').style.display = 'none';
        }
        
        function saveEditedTemplate() {
            const input = document.getElementById('edit-template-input');
            const text = input.value.trim();
            
            if (!text) {
                showMessage('Please enter template text', 'error', 'message-status');
                return;
            }
            
            templates[editingIndex] = text;
            saveTemplates();
            cancelEdit();
            loadTemplates();
            showMessage('Template updated successfully!', 'success', 'message-status');
        }
        
        function cancelEdit() {
            editingIndex = -1;
            document.getElementById('edit-template-input').value = '';
            document.getElementById('edit-template-form').style.display = 'none';
            document.querySelector('.template-form').style.display = 'flex';
        }
        
        function deleteTemplate(index) {
            if (confirm('Are you sure you want to delete this template?')) {
                templates.splice(index, 1);
                saveTemplates();
                loadTemplates();
                showMessage('Template deleted successfully!', 'success', 'message-status');
            }
        }
        
        function saveTemplates() {
            localStorage.setItem('messageTemplates', JSON.stringify(templates));
        }
        
        function onTemplateSelect() {
            const selected = document.getElementById('message-template').value;
            if (selected) {
                document.getElementById('custom-message').value = '';
            }
        }
        
        function exportTemplates() {
            const data = JSON.stringify(templates, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'message-templates.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showMessage('Templates exported successfully!', 'success', 'message-status');
        }
        
        function importTemplates() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = event => {
                    try {
                        const importedTemplates = JSON.parse(event.target.result);
                        if (Array.isArray(importedTemplates)) {
                            templates = importedTemplates;
                            saveTemplates();
                            loadTemplates();
                            showMessage('Templates imported successfully!', 'success', 'message-status');
                        } else {
                            showMessage('Invalid template file format', 'error', 'message-status');
                        }
                    } catch (error) {
                        showMessage('Error parsing template file', 'error', 'message-status');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // Load config when page loads
        window.onload = function() {
            loadConfig();
            updateCard(); // Initialize card with default values
            loadTemplates(); // Load message templates
        };
    </script>
</body>
</html>